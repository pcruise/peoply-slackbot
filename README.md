### 개요

핫텔 사용자에게 개인화가 적용된 추천 리스트를 제공해준다.

제공 시 사용되는 데이터는 **현재 지역 정보**, **핫텔 추천 리스트**, **사용자 이용 기록** 세 종류로 이루어져 있다.

제공된 데이터를 사용해 **지역 점수**, **객실 점수**, **호텔 점수** 세 종류의 우선순위 데이터를 만든 후 최종적으로 현재 오픈 된 객실과 호텔에 적용, 계산하여 점수를 계산해 정렬하여 제공한다.

### 제공 데이터

1. 현재 지역 정보

  사용자가 앱에 접속한 현재 지역 정보이다. 사용자의 설정에 따라 제공되지 않을 수 있다.

  제공된 좌표값에서 대략적으로 나누어 사용한다. (20km^2 넓이의 그리드 형태, 후술)

  지역 점수에 현재 접속 좌표에 10.0점을 부여한다.

2. 핫텔 추천 리스트

  추천 형태는 두 종류의 우선순위를 가진다. 기존 사용하던 시스템에서 가져옴.

  호텔 점수에 다음 점수를 부여한다.

  빨강: 3.0점
  파랑: 2.0점

3. 사용자 이용 기록

  1. 호텔 조회 기록
    호텔 조회 기록은 지역 점수, 객실 점수에 관여된다. 조회 당 각 점수에 a점을 부여한다. 각 점수는 A점을 초과할 수 없다.

  2. 호텔 검색 기록
    호텔 검색 기록은 지역 점수, 객실 점수에 관여된다. 조회 당 각 점수에 b점을 부여한다. 각 점수는 B점을 초과할 수 없다.

  3. 결제 시도 기록
    결제 시도 기록은 지역 점수, 객실 점수에 관여된다. 시도 한번 당 c의 점수를 각 항목에 추가한다. 각 점수는 C점을 초과할 수 없다.

  4. 결제 기록
    결제 기록은 지역 점수, 객실 점수에 관여된다. 시도 한번 당 D의 점수를 각 항목에 추가한다. 각 점수는 D점을 초과할 수 없다.

  5. 리뷰 기록
    리뷰 기록은 사용자의 호텔 점수에 관여된다. 호텔 최종 점수에 [1별: -20.0점, 2별: -5.0점, 3별: 1.0점, 4별: 2.0점, 5별: 10.0점]의 점수를 부여한다.
    리뷰 점수의 별은 이 유저가 이 호텔에 매긴 리뷰 점수의 전체 평균값을 사용한다.

  6. Dwell time (미구현)
    호텔 조회 후 빠져나오거나 다음 단계로 넘어갈 때 까지의 시간을 측정해서 점수를 매기는 방식이다.
    아직 앱에서 측정할 수 있는 방법이 없어서 보류.

### 점수 데이터

1. 지역 점수

  지역 점수는 대한민국을 20km^2 넓이로 근사한 좌표값을 기준으로 사용한다.

  한 점에 점수가 부여되면 그 점을 최고점으로 주변에 점수를 분포한다.

  모든 기준점을 사용해서 분포가 끝나면, 대략적인 점수 테이블이 나오며, 최종 점수 산출 에 사용한다.

2. 객실 점수

  객실 점수는 두 종류이다. 오픈되어있는 객실 별 타입, 가격을 기준으로 산출한다.

  타입: 싱글, 트윈, 더블, 3+
  가격: 유사도 점수

3. 호텔 점수

  호텔 점수는 제공 데이터에서 받아온 점수를 합산하여 계산한다.
  (리뷰와 핫텔 추천 점수)


### 오픈되어있는 객실에 적용

  각 객실에 대하여

  1. 지역 점수 데이터를 사용하여 객실의 지역 우선순위 점수를 구한다.
    지역 점수는 이 유저의 선호하는 지역에 얼마나 가까이 있는가를 나타낸다.

  2. 객실 점수 데이터를 사용하여 객실의 객실 우선순위 점수를 구한다.
    객실 점수는 이 유저가 선호하는 객실 종류와 해당 객실이 얼마나 유사한지를 나타낸다.

  3. 호텔 점수 데이터를 사용하여 객실의 호텔 우선순위 점수를 구한다.
    호텔 점수는 이 유저가 선호하는 호텔인가, 핫텔 추천이 적용된 호텔인가를 나타낸다.


### 순서 정하기

1. 가장 최근 구입한 호텔 1개, 최근 1달간 조회가 가장 높은 호텔 (중복 불가) 두 개를 찾아서 최근 호텔으로 따로 분류한다. 이 두 호텔은 추천 호텔 목록에 들어가지 않는다.

2. (연구)


### 연구

- 오늘 클릭 많이 된 호텔의 점수 추가 - 오늘 다른 유저에게 인기가 많았던 호텔
- 시간 별 데이터 중요도 계산 - 오래 된 데이터는 중요도가 떨어진다?
- 점수 결정 후 랜덤 점수 추가 - 추천 목록의 신선도


----------

